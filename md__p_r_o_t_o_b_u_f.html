<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>GTIRB: PROTOBUF</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">GTIRB
   &#160;<span id="projectnumber">v1.10.4</span>
   </div>
   <div id="projectbrief">GrammaTech Intermediate Representation for Binaries</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">PROTOBUF </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md19">Using Serialized GTIRB Data</a></li>
<li class="level1"><a href="#autotoc_md20">General Guidelines</a></li>
<li class="level1"><a href="#autotoc_md21">Python Applications</a><ul><li class="level2"><a href="#autotoc_md22">Python Examples</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md23">Java Applications</a><ul><li class="level2"><a href="#autotoc_md24">Java Examples</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="autotoc_md19"></a>
Using Serialized GTIRB Data</h1>
<p><a class="anchor" id="using-serialized-gtirb-data"></a></p>
<blockquote class="doxtable">
<p>Note that for language with GTIRB APIs (at least C++, Python, Common Lisp) using the GTIRB API is preferrable to manipulating protobuf directly. </p>
</blockquote>
<p>The serialized <a href="https://github.com/google/protobuf/wiki">protobuf</a> data produced by GTIRB allows for exploration and manipulation in the language of your choice. The <a href="https://developers.google.com/protocol-buffers/">Google protocol buffers</a> homepage lists the languages in which protocol buffers can be used directly; users of other languages can convert the protobuf-formatted data to JSON format and then use the JSON data in their applications. In the future we intend to define a standard JSON schema for GTIRB.</p>
<p>Directory <code>gtirb/src/proto</code> contains the protocol buffer message type definitions for GTIRB. You can inspect these <code>.proto</code> files to determine the structure of the various GTIRB message types. The top-level message type is <code>IR</code>.</p>
<ul>
<li><a href="#general-guidelines">General Guidelines</a></li>
<li><a href="#python-applications">Python Applications</a></li>
<li><a href="#java-applications">Java Applications</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md20"></a>
General Guidelines</h1>
<p><a class="anchor" id="general-guidelines"></a></p>
<p>If you have not used protocol buffers before, there are several useful resources available at <a href="https://developers.google.com/protocol-buffers/">https://developers.google.com/protocol-buffers/</a>, including an installation guide and a tutorial.</p>
<p>In general, writing an application to use GTIRB data in protocol buffer format will involve the following steps.</p>
<ol type="1">
<li>Install the protocol buffer compiler (<code>protoc</code>) from <a href="https://github.com/protocolbuffers/protobuf/releases">https://github.com/protocolbuffers/protobuf/releases</a>, if you haven't already done so.</li>
<li>Install any required protocol buffer library or libraries for the programming language you are using.</li>
<li>Invoke the protocol buffer compiler on the <code>.proto</code> files in <code>gtirb/src/proto/</code> to generate code in the language you wish to use.</li>
<li>Write your application, importing/including the file or files you generated in step 3.</li>
</ol>
<p>The <a href="https://developers.google.com/protocol-buffers/docs/reference/overview">Protocol Buffers API Reference</a> provides language-specific instructions for the various supported programming languages, along with links to information for cases where support is provided by third-party plug-ins.</p>
<h1><a class="anchor" id="autotoc_md21"></a>
Python Applications</h1>
<p><a class="anchor" id="python-applications"></a></p>
<p>To create a Python application that uses serialized GTIRB data, do the following.</p>
<ol type="1">
<li>Install the protocol buffer compiler (<code>protoc</code>).</li>
<li>Install the Python protobuf library, if you haven't already done so. <pre class="fragment">$ pip install protobuf
</pre></li>
<li>Generate Python message definitions in a dedicated directory (for example, <code>python/</code>). <pre class="fragment">$ mkdir -p python
$ for f in src/proto/*.proto; do
     protoc -Isrc/proto --python_out=python $f
  done
</pre> This will create a number of files with names of the form <code>&lt;bn&gt;_pb2.py</code> in the <code>python/</code> subdirectory of your working directory: one for each <code>&lt;bn&gt;.proto</code> in src/proto/, including <code>IR_pb2.py</code>.</li>
<li>Write your application. Make sure that it imports <code>IR_pb2</code>, or the parts of it that you require.</li>
<li>Run your application, making sure that the directory containing your message definitions is in the <code>PYTHONPATH</code>.</li>
</ol>
<h2><a class="anchor" id="autotoc_md22"></a>
Python Examples</h2>
<p><a class="anchor" id="python-examples"></a></p>
<p>Directory <code>gtirb/doc/examples</code> contains several example Python scripts that use protocol buffers to explore serialized GTIRB data.</p><ul>
<li><a class="el" href="cfg-paths_8py-example.html">cfg-paths.py</a></li>
<li><a class="el" href="data-symbols_8py-example.html">data-symbols.py</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md23"></a>
Java Applications</h1>
<p><a class="anchor" id="java-applications"></a></p>
<p>To create a Java application that uses serialized GTIRB data, do the following.</p>
<ol type="1">
<li>Install the protocol buffer compiler (<code>protoc</code>).</li>
<li>Download the <code>protobuf</code> Java runtime from <a href="https://mvnrepository.com/artifact/com.google.protobuf/protobuf-java">https://mvnrepository.com/artifact/com.google.protobuf/protobuf-java</a> and save it somewhere suitable.</li>
<li>Generate Java message definitions in a dedicated directory (for example, <code>java/</code>). <pre class="fragment">$ mkdir -p java
$ for f in src/proto/*.proto; do
     protoc -Isrc/proto --java_out=java $f
  done
</pre> This will create a subdirectory &lsquo;java/proto/&rsquo;, containing a number of files with names of the form <code>&lt;bn&gt;OuterClass.java</code>: one for each <code>&lt;bn&gt;.proto</code> in <code>src/proto/</code>.</li>
<li><p class="startli">Compile the Java message definitions, making sure the <code>protobuf</code> Java runtime <code>.jar</code> file is in your <code>CLASSPATH</code>.</p>
<p class="startli">$ mkdir -p java/classfiles $ CLASSPATH=&lt;path/to/protobuf_jar&gt; \ javac -d java/classfiles java/proto/*.java</p>
<p class="startli">(If you want to build a <code>.jar</code> file to combine all these <code>.class</code> files, do so at this stage.)</p>
</li>
<li>Write your application. Make sure that it imports all the classes you need from the <code>proto</code> package.</li>
<li>Compile and run your application, making sure that your CLASSPATH contains both the <code>protobuf</code> Java runtime <code>.jar</code> file and the location of the your compiled message definition classes.</li>
</ol>
<h2><a class="anchor" id="autotoc_md24"></a>
Java Examples</h2>
<p><a class="anchor" id="java-examples"></a></p>
<p>Directory <code>gtirb/doc/examples</code> contains several example Java programs that use protocol buffers to explore serialized GTIRB data.</p>
<ul>
<li><a class="el" href="datasymbols_8java-example.html">datasymbols.java</a> </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
